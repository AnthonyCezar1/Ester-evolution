<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ester Evolution | Master Training</title>
    <style>
        :root { --primary: #673ab7; --bg: #f8f0fb; --text: #333; --accent: #9575cd; --safe: #4caf50; --video: #f44336; --water: #2196f3; --loss: #e91e63; }
        body { margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); display: flex; justify-content: center; min-height: 100vh; }
        .app-container { width: 100%; max-width: 450px; padding: 20px; }
        
        /* Navega√ß√£o */
        .day-nav { display: flex; align-items: center; justify-content: center; gap: 20px; margin-bottom: 15px; }
        .nav-arrow { background: white; border: 2px solid var(--primary); color: var(--primary); width: 35px; height: 35px; border-radius: 50%; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .nav-arrow:disabled { border-color: #ddd; color: #ddd; cursor: not-allowed; }
        .day-title { font-size: 1.2rem; font-weight: bold; color: var(--primary); min-width: 80px; text-align: center; }
        
        .progress-container { width: 100%; height: 12px; background: #eee; border-radius: 10px; margin: 10px 0; overflow: hidden; }
        .progress-bar { height: 100%; background: linear-gradient(to right, var(--primary), var(--accent)); width: 0%; transition: width 0.6s ease; }

        /* Peso e Evolu√ß√£o */
        .weight-card { background: white; border-radius: 20px; padding: 15px; margin-bottom: 15px; border: 2px solid var(--primary); box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .weight-row { display: flex; justify-content: space-between; align-items: center; }
        .weight-card input { width: 80px; padding: 10px; border: 2px solid #eee; border-radius: 10px; text-align: center; font-size: 1.2rem; color: var(--primary); font-weight: bold; }
        .evolution-badge { margin-top: 10px; padding: 10px; border-radius: 12px; background: #f3e5f5; color: var(--loss); font-weight: bold; text-align: center; font-size: 0.9rem; display: none; }

        /* √Ågua */
        .card-water { background: white; border-radius: 20px; padding: 15px; margin-bottom: 15px; text-align: center; border: 2px solid var(--water); }
        .water-grid { display: flex; justify-content: center; gap: 8px; flex-wrap: wrap; margin-top: 10px; }
        .water-glass { width: 25px; height: 35px; border: 2px solid #ddd; border-radius: 0 0 10px 10px; cursor: pointer; }
        .water-glass.filled { background: var(--water); border-color: var(--water); }

        /* Dieta e Treino */
        .card { background: white; border-radius: 20px; padding: 15px; margin-bottom: 15px; border-left: 5px solid var(--primary); box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .check-item { display: flex; align-items: flex-start; gap: 12px; padding: 12px 0; border-bottom: 1px solid #f0f0f0; }
        .item-text { font-size: 0.9rem; line-height: 1.4; flex: 1; }
        .gram-hl { color: #673ab7; font-weight: bold; background: #f3e5f5; padding: 0 4px; border-radius: 4px; }
        
        .checkbox { width: 26px; height: 26px; border: 2px solid #ddd; border-radius: 8px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; background: white; cursor: pointer; }
        input[type="checkbox"]:checked + .checkbox { background: var(--safe); border-color: var(--safe); }
        input[type="checkbox"]:checked + .checkbox::after { content: '‚úì'; color: white; font-weight: bold; }
        input[type="checkbox"] { display: none; }

        .btn-video { display: inline-flex; background: #ede7f6; color: var(--primary); padding: 5px 12px; border-radius: 8px; font-size: 0.7rem; font-weight: bold; text-decoration: none; margin-top: 8px; border: 1px solid #d1c4e9; }
        .btn-finish { width: 100%; padding: 18px; border-radius: 15px; border: none; background: linear-gradient(to right, var(--primary), var(--accent)); color: white; font-weight: bold; font-size: 1rem; cursor: pointer; margin-top: 10px; }
        .btn-reset { background: none; border: none; color: #bbb; padding: 10px; font-size: 0.7rem; margin-top: 20px; cursor: pointer; width: 100%; text-decoration: underline; }
    </style>
</head>
<body>
<div class="app-container">
    <header>
        <h1 style="text-align: center; color: var(--primary); margin: 0;">Ester Evolution</h1>
        <div class="progress-container"><div class="progress-bar" id="p-bar"></div></div>
        <div class="day-nav">
            <button class="nav-arrow" id="prev-btn" onclick="changeDay(-1)">‚Üê</button>
            <div class="day-title">DIA <span id="day-display">1</span></div>
            <button class="nav-arrow" id="next-btn" onclick="changeDay(1)">‚Üí</button>
        </div>
    </header>

    <div class="weight-card">
        <div class="weight-row">
            <label>PESO DE HOJE:</label>
            <input type="number" id="daily-weight" step="0.1" placeholder="00.0" oninput="saveWeight()">
        </div>
        <div id="evolution-msg" class="evolution-badge"></div>
    </div>

    <div class="card-water">
        <h2 style="color:var(--water); font-size: 0.85rem; margin: 0;">üíß √ÅGUA (META: 2 LITROS / 8 COPOS)</h2>
        <div class="water-grid" id="water-grid"></div>
    </div>

    <div class="card">
        <h2 style="font-size: 0.85rem; color: var(--primary); margin-top: 0;">üçΩÔ∏è CARD√ÅPIO COM PESOS</h2>
        <div id="diet-content"></div>
    </div>
    
    <div class="card" style="border-left-color: var(--safe);">
        <h2 style="font-size: 0.85rem; color: var(--safe); margin-top: 0;">üèãÔ∏è TREINO DETALHADO</h2>
        <div id="workout-content"></div>
    </div>
    
    <button class="btn-finish" onclick="finishDay()">FINALIZAR DIA ‚ú®</button>
    <button class="btn-reset" onclick="resetProgress()">Reiniciar Plano</button>
</div>

<script>
    let currentDay = parseInt(localStorage.getItem('ew_view') || 1);
    let maxDay = parseInt(localStorage.getItem('ew_max') || 1);

    const dietas = [
        [
            "Caf√©: ‚òï Caf√© s/ a√ß√∫car + ü•ñ <span class='gram-hl'>1 P√£o Franc√™s (50g)</span> + 1 fatia de queijo",
            "Almo√ßo: <span class='gram-hl'>120g Frango Grelhado</span> + 3 col. sopa de legumes + Salada √† vontade",
            "Noite: üçø <span class='gram-hl'>40g de Milho</span> (1 bacia m√©dia de pipoca) c/ pouco sal"
        ],
        [
            "Caf√©: ‚òï Caf√© s/ a√ß√∫car + <span class='gram-hl'>2 Ovos Mexidos</span> (c/ pouco √≥leo)",
            "Almo√ßo: <span class='gram-hl'>110g Carne Mo√≠da</span> + <span class='gram-hl'>100g de Br√≥colis</span>/Cenoura",
            "Noite: ü•ñ <span class='gram-hl'>1 P√£o Franc√™s (50g)</span> recheado c/ 1 ovo mexido"
        ]
    ];

    const treinos = [
        {
            nome: "Treino A: Fortalecimento",
            e: [
                {t: "Agachamento na Cadeira", r: "3 s√©ries de 12", d: "Sente e levante de uma cadeira firme sem usar as m√£os se poss√≠vel. Mant√©m as costas retas.", v: "agachamento+idoso+cadeira"},
                {t: "Flex√£o na Parede", r: "3 s√©ries de 10", d: "Fique de frente para a parede, apoie as m√£os e empurre o corpo. Trabalha bra√ßos e peito.", v: "flexao+de+braco+na+parede"},
                {t: "Caminhada Cont√≠nua", r: "20 minutos", d: "Caminhe em ritmo que voc√™ consiga falar mas sinta o cora√ß√£o acelerar levemente.", v: "caminhada+20+minutos+em+casa"}
            ]
        },
        {
            nome: "Treino B: Queima e Mobilidade",
            e: [
                {t: "Marcha Estacion√°ria", r: "3 s√©ries de 1 min", d: "Simule uma caminhada no lugar, subindo bem os joelhos. Use os bra√ßos para equilibrar.", v: "marcha+estacionaria+idoso"},
                {t: "Prancha na Mesa ou Balc√£o", r: "3 s√©ries de 30 seg", d: "Apoie os cotovelos em um balc√£o firme, incline o corpo e segure o abd√¥men bem apertado.", v: "prancha+abdominal+inclinada"},
                {t: "Abdominal sentada", r: "3 s√©ries de 15", d: "Sentada na ponta da cadeira, incline um pouco para tr√°s e suba um joelho de cada vez.", v: "abdominal+sentado+cadeira"}
            ]
        }
    ];

    function saveWeight() {
        localStorage.setItem(`ew_val_d${currentDay}`, document.getElementById('daily-weight').value);
        updateEvolution();
    }

    function updateEvolution() {
        const current = parseFloat(document.getElementById('daily-weight').value);
        const msgBox = document.getElementById('evolution-msg');
        if (currentDay > 1 && current > 0) {
            const last = parseFloat(localStorage.getItem(`ew_val_d${currentDay-1}`));
            if (last) {
                const diff = (last - current).toFixed(2);
                msgBox.style.display = "block";
                if (diff > 0) msgBox.innerHTML = `‚≠ê Que orgulho! Voc√™ perdeu <b>${diff}kg</b> desde ontem!`;
                else if (diff < 0) msgBox.innerHTML = `Foco total! Amanh√£ o peso cai!`;
                else msgBox.innerHTML = `Peso est√°vel! Continue no plano.`;
            }
        } else msgBox.style.display = "none";
    }

    function changeDay(delta) {
        let n = currentDay + delta;
        if(n >= 1 && n <= 30) { currentDay = n; render(); }
    }

    function renderWater() {
        const grid = document.getElementById('water-grid');
        const count = parseInt(localStorage.getItem(`ew_h2o_d${currentDay}`) || 0);
        grid.innerHTML = '';
        for(let i=1; i<=8; i++) {
            const g = document.createElement('div');
            g.className = 'water-glass' + (i <= count ? ' filled' : '');
            g.onclick = () => { localStorage.setItem(`ew_h2o_d${currentDay}`, i); renderWater(); };
            grid.appendChild(g);
        }
    }

    function render(){
        document.getElementById('day-display').innerText = currentDay;
        document.getElementById('prev-btn').disabled = (currentDay === 1);
        document.getElementById('next-btn').disabled = (currentDay >= maxDay);
        document.getElementById('p-bar').style.width = Math.round((maxDay/30)*100) + "%";
        document.getElementById('daily-weight').value = localStorage.getItem(`ew_val_d${currentDay}`) || "";
        updateEvolution();
        renderWater();

        const dIdx = (currentDay-1)%2;
        document.getElementById('diet-content').innerHTML = dietas[dIdx].map((item, i) => `
            <div class="check-item">
                <label><input type="checkbox" id="ed_${currentDay}_${i}" ${localStorage.getItem(`ed_${currentDay}_${i}`) ? 'checked' : ''} onchange="localStorage.setItem('ed_${currentDay}_${i}', this.checked ? '1' : '')"><div class="checkbox"></div></label>
                <span class="item-text">${item}</span>
            </div>`).join('');

        const tIdx = (currentDay-1)%2;
        const treinoAtual = treinos[tIdx];
        document.getElementById('workout-content').innerHTML = `
            <p style="font-weight:bold; color:var(--safe); margin: 0 0 10px 0;">${treinoAtual.nome}</p>
            ` + treinoAtual.e.map((ex, i) => `
            <div class="check-item">
                <label><input type="checkbox" id="ex_${currentDay}_${i}" ${localStorage.getItem(`ex_${currentDay}_${i}`) ? 'checked' : ''} onchange="localStorage.setItem('ex_${currentDay}_${i}', this.checked ? '1' : '')"><div class="checkbox"></div></label>
                <div class="item-text">
                    <b>${ex.t}</b> (${ex.r})<br>
                    <small style="color:#666">${ex.d}</small><br>
                    <a href="https://www.youtube.com/results?search_query=${ex.v}" target="_blank" class="btn-video">‚ñ∂ VER V√çDEO</a>
                </div>
            </div>`).join('');
    }

    function finishDay() {
        if(currentDay === maxDay && maxDay < 30) { maxDay++; localStorage.setItem('ew_max', maxDay); }
        alert("Dia conclu√≠do com sucesso! Vamos para o pr√≥ximo?");
        changeDay(1);
    }

    function resetProgress(){ if(confirm("Dona Ester, quer apagar o hist√≥rico e recome√ßar?")){ localStorage.clear(); location.reload(); } }
    window.onload = render;
</script>
</body>

</html>

